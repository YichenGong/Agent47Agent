#
# This is a test file for the game node, copy and paste down your directory path below
#
from functools import partial
import numpy as np
import sys
sys.path.append('C:\\Users\\Henry\\Documents\\GitHub\\CutePrommerman')

from pommerman import constants, utility
from game_node import Node
from pommerman.agents import score_func

import time

obs = {'board': np.array([[ 0, 0, 0, 0, 0,  1,  1,  1,  0,  1,  1,  1,  0],
 [ 0,  0,  0,  0,  0,  0,  0,  2,  3,  0,  0, 11,  3],
 [ 0,  0,  0,  1,  1,  1,  1,  0, 0,  1,  1,  0,  1],
 [ 0,  0,  1,  0,  1,  0,  1,  0,  1,  3,  0, 14,  0],
 [ 0,  0,  1,  1,  0,  0,  0,  0,  0,  9,  2,  1,  1],
 [ 1,  0,  1,  0,  0,  0,  0,  0,  1,  1,  0,  0,  0],
 [ 1,  0,  1, 1,  0,  0,  0,  0,  0,  1,  1,  0,  1],
 [ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0 , 0,  0,  0],
 [ 0,  0,  0,  0,  0,  1,  0,  0,  0 , 13,  1,  0,  0],
 [ 1,  0,  0,  1 , 0,  1,  1,  0,  0 , 0  ,0,  0,  1],
 [ 1,  0,  1,  0,  0,  0,  1,  0,  1 , 0  ,0,  0,  0],
 [ 1,  0,  12,  0,  0,  0,  0,  0,  0 , 0 , 0,  0,  0],
 [ 0,  1,  1,  1,  1,  0,  1,  9,  0 , 1,  0,  0,  0]], dtype=np.uint8),
       'bomb_blast_strength': np.array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0, 0., 0., 0., 0., 5., 0., 0., 0., 2.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 4., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]), 
       'bomb_life': np.array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 11., 0., 0., 0., 1.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]), 'position': (1, 11), 'blast_strength': 3, 'can_kick': False, 'teammate': [constants.Item.AgentDummy], 'ammo': 1, 'enemies': [constants.Item.Agent1, constants.Item.Agent2, constants.Item.Agent3]}

#f = partial(score_func.score_func_with_target, constants.Item.Agent3)
print(score_func.score_func_evade(obs))

# make_node_start = time.time()
# n = Node(obs, True, [])
# make_node_elapsed = time.time() - make_node_start

# a = [constants.Action.Left] + [constants.Action.Down] * 13

# adv_time_start = time.time()
# n.state.advance_game(constants.Action.Left)#a[i])
# adv_ellapsed = time.time() - adv_time_start

# clone_node_start = time.time()
# s = n.clone()
# clone_node_ellapsed = time.time() - clone_node_start


# print("Make Node: ", make_node_elapsed)
# print("Advance Game: ", adv_ellapsed)
# print("Clone Node: ", clone_node_ellapsed)

#===================ORIGINAL=================================
"""
 [[ 0  0  0  0  0  1  1  1  0  1  1  1  0]
 [ 0  0  0  0  0  0  0  2  0  0  0 11  1]
 [ 0  0  0  1  1  1  1  3  0  0  1 14  1]
 [ 0  0  1  0  1  0  1  0  0  1  0  0  1]
 [ 0  0  1  1  0  0  0  0  0  9  2  2  1]
 [ 1  0  1  0  0  0  0  0  1  1  0  0  0]
 [ 1  0  1  1  0  0  0  0  0  1  1  0  1]
 [ 1  0  0  0  0  0  0  0  0  0  0  0  0]
 [ 0  0  0  0  0  1  0  0  0  0  1  0  0]
 [ 1  0  0  1  0  1  1  0  0  0  0  0  1]
 [ 1  0  1  0  0  0  1  0  1  0  0  0  0]
 [ 1  0  0  0  0  0  0  0  0  0  0  0  0]
 [ 0  1  1  1  1  0  1  9  0  1  0  0  0]] 86

obs = {'board': np.array([[ 0,  1,  0,  1,  1,  0,  0,  1,  1,  2,  2,  1,  1],
       [ 1, 11,  0,  0,  2,  2,  2,  2,  2,  0,  0, 14,  0],
       [ 0,  0,  0,  0,  1,  2,  0,  1,  0,  0,  1,  0,  1],
       [ 1,  0,  0,  0,  0,  2,  1,  1,  1,  1,  1,  0,  1],
       [ 1,  2,  1,  0,  0,  0,  0,  1,  0,  1,  1,  2,  2],
       [ 0,  2,  2,  2,  0,  0,  1,  2,  2,  2,  1,  2,  0],
       [ 0,  2,  0,  1,  0,  1,  0,  2,  1,  1,  0,  2,  2],
       [ 1,  2,  1,  1,  1,  2,  2,  0,  2,  1,  2,  2,  0],
       [ 1,  2,  0,  1,  0,  2,  1,  2,  0,  0,  2,  2,  0],
       [ 2,  0,  0,  1,  1,  2,  1,  1,  0,  0,  2,  0,  0],
       [ 2,  0,  1,  1,  1,  1,  0,  2,  2,  2,  0,  0,  2],
       [ 1, 12,  0,  0,  2,  2,  2,  2,  2,  0,  0, 13,  0],
       [ 1,  0,  1,  1,  2,  0,  2,  0,  0,  0,  2,  0,  0]], dtype=np.uint8),
       'bomb_blast_strength': np.array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]), 
       'bomb_life': np.array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]), 'position': (1, 1), 'blast_strength': 3, 'can_kick': False, 'teammate': [constants.Item.AgentDummy], 'ammo': 1, 'enemies': [constants.Item.Agent1, constants.Item.Agent2, constants.Item.Agent3]}
"""
